#!/usr/bin/env bash
# Script to generate mysql database backup

# Check if password is provided
if [ $# -eq 0 ]; then
	echo "Please provide the MySQL root password as an argument"
	exit 1
fi

# MySQL dump
mysqldump -u root -p"$1" --all-databases >backup.sql

# Check if mysqldump was successful
if [ $? -ne 0 ]; then
	echo "MySQL dump failed"
	exit 1
fi

# Create archive name
archive_name=$(date +"%d-%m-%Y").tar.gz

# Compress the dump
tar -czf "$archive_name" backup.sql

# Check if compression was successful
if [ $? -ne 0 ]; then
	echo "Compression failed"
	exit 1
fi

echo "Backup completed successfully"
